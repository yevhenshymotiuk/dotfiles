#!/usr/bin/env bash

function run {
    while getopts "t" opt; do
        case "$opt" in
            t)
                terminal=true
        esac
    done

    if [ "$terminal" ]; then
        application="$2"
        workspace="$3"

        swaymsg "workspace $workspace; exec alacritty -e $(which $application)"
    else
        application="$1"
        workspace="$2"

        swaymsg "workspace $workspace; exec $(which $application)"
    fi
}

function run-if-ne {
    while getopts "t" opt; do
        case "$opt" in
            t)
                terminal=true
        esac
    done

    if [ "$terminal" ]; then
        application="$2"
        workspace="$3"
    else
        application="$1"
        workspace="$2"
    fi

    if [ "$(pgrep $application)${?}" == 1 ]; then
        if [ "$terminal" ]; then
            run -t "$application" "$workspace"
        else
            run "$application" "$workspace"
        fi
    else
        echo "$application is already opened"
    fi
}

run-if-ne qutebrowser 1
run-if-ne emacs 2
run-if-ne telegram-desktop 3
run-if-ne alacritty 4
run-if-ne -t gotop 5
